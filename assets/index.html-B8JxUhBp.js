import{_ as i,c as a,d as e,o as h}from"./app-BN04xNHl.js";const n={};function t(l,s){return h(),a("div",null,[...s[0]||(s[0]=[e(`<p>åœ¨ <strong>ES Modules (ESM)</strong> ä¸­å¼•å…¥ <strong>CommonJS (CJS)</strong> çš„åŒ…ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„è¿è¡Œç¯å¢ƒï¼ˆNode.js / æµè§ˆå™¨ / æ‰“åŒ…å·¥å…·ï¼‰å’Œæ¨¡å—ç³»ç»Ÿè¿›è¡Œé€‚é…ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è§£å†³æ–¹æ¡ˆï¼š</p><h2 id="node-js-ç¯å¢ƒä¸‹çš„-esm-å¼•å…¥-cjs" tabindex="-1"><a class="header-anchor" href="#node-js-ç¯å¢ƒä¸‹çš„-esm-å¼•å…¥-cjs"><span>Node.js ç¯å¢ƒä¸‹çš„ ESM å¼•å…¥ CJS</span></a></h2><p>Node.js æ”¯æŒåœ¨ ESM ä¸­ç›´æ¥ <code>import</code> CommonJS æ¨¡å—ï¼Œä½†éœ€æ³¨æ„ï¼š</p><h3 id="_1ã€ç›´æ¥-import-æ¨è" tabindex="-1"><a class="header-anchor" href="#_1ã€ç›´æ¥-import-æ¨è"><span>1ã€ç›´æ¥ <code>import</code>ï¼ˆæ¨èï¼‰</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// ESM æ–‡ä»¶ï¼ˆå¦‚ app.mjs æˆ– package.json è®¾ç½® &quot;type&quot;: &quot;module&quot;ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cjsPackage</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commonjs-package</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // é»˜è®¤å¯¼å…¥</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> namedExport</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commonjs-package</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å…·åå¯¼å…¥ï¼ˆå¦‚æœ CJS æ”¯æŒï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p><ul><li><p>å¦‚æœ CJS æ¨¡å—ä½¿ç”¨ <code>module.exports = ...</code>ï¼Œéœ€ç”¨ <code>default</code> å¯¼å…¥ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cjsDefault</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commonjs-package</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å¯¹åº” module.exports = ...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>å¦‚æœ CJS æ¨¡å—å¯¼å‡ºå¤šä¸ªå±æ€§ï¼ˆå¦‚ <code>exports.a = ...; exports.b = ...</code>ï¼‰ï¼Œå¯ä»¥ç”¨ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> *</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> as</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cjsModule</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commonjs-package</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å…¨éƒ¨å¯¼å…¥ä¸ºå‘½åç©ºé—´</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cjsModule</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cjsModule</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">b</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_2ã€åŠ¨æ€-import-å¼‚æ­¥åŠ è½½" tabindex="-1"><a class="header-anchor" href="#_2ã€åŠ¨æ€-import-å¼‚æ­¥åŠ è½½"><span>2ã€åŠ¨æ€ <code>import()</code>ï¼ˆå¼‚æ­¥åŠ è½½ï¼‰</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cjsModule</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> await</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> import</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commonjs-package</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è¿”å› Promise</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">cjsModule</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">default</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å¯¹åº” module.exports</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€ä½¿ç”¨-createrequire-å…¼å®¹å¤æ‚åœºæ™¯" tabindex="-1"><a class="header-anchor" href="#_3ã€ä½¿ç”¨-createrequire-å…¼å®¹å¤æ‚åœºæ™¯"><span>3ã€ä½¿ç”¨ <code>createRequire</code>ï¼ˆå…¼å®¹å¤æ‚åœºæ™¯ï¼‰</span></a></h3><p>å¦‚æœé‡åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ <code>node:module</code> æ‰‹åŠ¨åˆ›å»º <code>require</code>ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> createRequire</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">node:module</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> require</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> createRequire</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">meta</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cjsModule</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> require</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commonjs-package</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // ä¼ ç»Ÿ require</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="æµè§ˆå™¨ç¯å¢ƒ-é€šè¿‡æ‰“åŒ…å·¥å…·" tabindex="-1"><a class="header-anchor" href="#æµè§ˆå™¨ç¯å¢ƒ-é€šè¿‡æ‰“åŒ…å·¥å…·"><span>æµè§ˆå™¨ç¯å¢ƒï¼ˆé€šè¿‡æ‰“åŒ…å·¥å…·ï¼‰</span></a></h2><p>åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ ESM æ—¶ï¼Œéœ€å€ŸåŠ© <strong>Webpack / Vite / Rollup</strong> ç­‰å·¥å…·å¤„ç† CJS ä¾èµ–ï¼š</p><h3 id="_1ã€webpack-vite-rollup" tabindex="-1"><a class="header-anchor" href="#_1ã€webpack-vite-rollup"><span>1ã€Webpack / Vite / Rollup</span></a></h3><p>è¿™äº›å·¥å…·ä¼šè‡ªåŠ¨è½¬æ¢ CJS ä¸º ESMï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š</p><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// ç›´æ¥ importï¼Œæ‰“åŒ…å·¥å…·ä¼šå¤„ç†</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cjsPackage</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commonjs-package</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2ã€æµè§ˆå™¨åŸç”Ÿ-esm-cdn" tabindex="-1"><a class="header-anchor" href="#_2ã€æµè§ˆå™¨åŸç”Ÿ-esm-cdn"><span>2ã€æµè§ˆå™¨åŸç”Ÿ ESM + CDN</span></a></h3><p>å¦‚æœç›´æ¥ä½¿ç”¨æµè§ˆå™¨ ESMï¼ˆæ— æ‰“åŒ…å·¥å…·ï¼‰ï¼Œéœ€ç¡®ä¿ CJS åŒ…æä¾› ESM ç‰ˆæœ¬ï¼ˆå¦‚é€šè¿‡ <code>esm.sh</code> æˆ– <code>skypack.dev</code>ï¼‰ï¼š</p><div class="language-html line-numbers-mode" data-highlighter="shiki" data-ext="html" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-html"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">script</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> type</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">module</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">  import</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> lodash</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://esm.sh/lodash</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // CDN æä¾› ESM ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  console</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">log</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">lodash</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">get</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">({</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> a</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> },</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">a</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;/</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">script</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="typescript-é¡¹ç›®ä¸­çš„-cjs-å¯¼å…¥" tabindex="-1"><a class="header-anchor" href="#typescript-é¡¹ç›®ä¸­çš„-cjs-å¯¼å…¥"><span>TypeScript é¡¹ç›®ä¸­çš„ CJS å¯¼å…¥</span></a></h2><p>å¦‚æœä½¿ç”¨ TypeScriptï¼Œéœ€ç¡®ä¿ <code>tsconfig.json</code> æ­£ç¡®é…ç½®ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">compilerOptions</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">module</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ESNext</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æˆ– &quot;CommonJS&quot;ï¼ˆå¦‚æœè¾“å‡º CJSï¼‰</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">moduleResolution</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">node16</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // æˆ– &quot;nodenext&quot;ï¼ˆæ”¯æŒ node: å’Œ CJS äº’æ“ä½œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">esModuleInterop</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å…è®¸ default å¯¼å…¥ CJS</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">allowSyntheticDefaultImports</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å…¼å®¹æ—  default å¯¼å‡ºçš„ CJS æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åå¯ä»¥æ­£å¸¸ <code>import</code>ï¼š</p><div class="language-typescript line-numbers-mode" data-highlighter="shiki" data-ext="typescript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-typescript"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> _</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">lodash</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å³ä½¿ lodash æ˜¯ CJSï¼Œä¹Ÿèƒ½æ­£ç¡®å¯¼å…¥</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="å¸¸è§é—®é¢˜åŠè§£å†³" tabindex="-1"><a class="header-anchor" href="#å¸¸è§é—®é¢˜åŠè§£å†³"><span>å¸¸è§é—®é¢˜åŠè§£å†³</span></a></h2><h3 id="é—®é¢˜-1-dirname-å’Œ-filename-åœ¨-esm-ä¸­ä¸å¯ç”¨" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜-1-dirname-å’Œ-filename-åœ¨-esm-ä¸­ä¸å¯ç”¨"><span>é—®é¢˜ 1ï¼š<code>__dirname</code> å’Œ <code>__filename</code> åœ¨ ESM ä¸­ä¸å¯ç”¨</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> fileURLToPath</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">node:url</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> dirname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">node:path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> __filename</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> fileURLToPath</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">meta</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">url</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> __dirname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> dirname</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">__filename</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é—®é¢˜-2-cjs-åŒ…æ²¡æœ‰é»˜è®¤å¯¼å‡º" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜-2-cjs-åŒ…æ²¡æœ‰é»˜è®¤å¯¼å‡º"><span>é—®é¢˜ 2ï¼šCJS åŒ…æ²¡æœ‰é»˜è®¤å¯¼å‡º</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="shiki" data-ext="javascript" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-javascript"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> *</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> as</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cjsModule</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">commonjs-package</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // å…¨éƒ¨å¯¼å…¥</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> namedExport</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> cjsModule</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // è§£æ„</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="é—®é¢˜-3-å¾ªç¯ä¾èµ–å¯¼è‡´-undefined" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜-3-å¾ªç¯ä¾èµ–å¯¼è‡´-undefined"><span>é—®é¢˜ 3ï¼šå¾ªç¯ä¾èµ–å¯¼è‡´ <code>undefined</code></span></a></h3><ul><li>CJS å’Œ ESM æ··ç”¨æ—¶å¯èƒ½å‡ºé—®é¢˜ï¼Œå°½é‡ç»Ÿä¸€æ¨¡å—ç³»ç»Ÿã€‚</li><li>ä½¿ç”¨åŠ¨æ€ <code>import()</code> å»¶è¿ŸåŠ è½½ã€‚</li></ul><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h2><table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>æ¨èæ–¹æ¡ˆ</strong></th></tr></thead><tbody><tr><td>Node.js ESM</td><td>ç›´æ¥ <code>import</code> æˆ– <code>createRequire</code></td></tr><tr><td>æµè§ˆå™¨ ESM</td><td>æ‰“åŒ…å·¥å…·ï¼ˆWebpack/Viteï¼‰æˆ– ESM CDN</td></tr><tr><td>TypeScript</td><td>é…ç½® <code>esModuleInterop: true</code></td></tr><tr><td>åŠ¨æ€åŠ è½½</td><td><code>await import(&#39;cjs-package&#39;)</code></td></tr></tbody></table><p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p><ul><li><strong>æ–°é¡¹ç›®</strong>ï¼šå°½é‡ä½¿ç”¨ ESM è§„èŒƒçš„åŒ…ã€‚</li><li><strong>æ—§é¡¹ç›®è¿ç§»</strong>ï¼šé€æ­¥æ›¿æ¢ CJS ä¾èµ–ï¼Œæˆ–ç”¨ <code>createRequire</code> è¿‡æ¸¡ã€‚</li><li><strong>æµè§ˆå™¨ç¯å¢ƒ</strong>ï¼šä¼˜å…ˆé€‰æ‹© ESM CDN æˆ–æ‰“åŒ…å·¥å…·ã€‚</li></ul><p>è¿™æ ·å°±èƒ½åœ¨ ESM ä¸­æ— ç¼ä½¿ç”¨ CJS åŒ…ï¼ ğŸš€</p>`,37)])])}const p=i(n,[["render",t]]),d=JSON.parse('{"path":"/notes/NodeJs/dz532cqn/","title":"2. å¦‚ä½•åœ¨ ESM é‡Œä½¿ç”¨ CJS çš„åŒ… | NodeJs","lang":"zh-CN","frontmatter":{"title":"2. å¦‚ä½•åœ¨ ESM é‡Œä½¿ç”¨ CJS çš„åŒ…","createTime":"2025/06/24 12:24:03","permalink":"/notes/NodeJs/dz532cqn/"},"readingTime":{"minutes":2.39,"words":717},"git":{"createdTime":1750739925000,"updatedTime":1764524144000,"contributors":[{"name":"kangkang shang","username":"","email":"535634238@qq.com","commits":3,"avatar":"https://gravatar.com/avatar/899a2a8091fc73ff6879f8a45f98a5a42ca8b9665bca19ce8af3a144e416ed11?d=retro"}],"changelog":[{"hash":"37a5215b25a66c978fe447e5ce9d1d1acc9adaad","time":1764524144000,"email":"535634238@qq.com","author":"kangkang shang","message":"docs: æ›´æ–°æ–‡æ¡£ç»“æ„å’Œå†…å®¹"},{"hash":"b7a94366f5ec97e16ce820d09d23cc3150bfe9bd","time":1750740215000,"email":"535634238@qq.com","author":"kangkang shang","message":"1"},{"hash":"c9184f1366d803c27991eb25486bc1dbf88a36e4","time":1750739925000,"email":"535634238@qq.com","author":"kangkang shang","message":"1"}]},"filePathRelative":"notes/NodeJs/2.å®ç”¨æ“ä½œ/2.å¦‚ä½•åœ¨ESMé‡Œä½¿ç”¨CJSçš„åŒ….md","headers":[],"bulletin":false}');export{p as comp,d as data};
