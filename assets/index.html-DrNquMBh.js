import{_ as e,c as a,d,o as r}from"./app-BN04xNHl.js";const c={};function o(s,t){return r(),a("div",null,[...t[0]||(t[0]=[d('<h3 id="_1、宏任务" tabindex="-1"><a class="header-anchor" href="#_1、宏任务"><span>1、宏任务</span></a></h3><p>JavaScript 执行环境中由宿主环境（浏览器/Node.js）发起的异步任务，会被放入任务队列(Task Queue)等待主线程执行栈清空后执行。</p><ol><li>用户交互：例如点击、滚动、输入等用户操作触发的事件。</li><li>定时器：<code>setTimeout</code>、<code>setInterval</code>。</li><li>网络请求：例如 Ajax 请求完成时触发的事件。</li><li>I/O 操作：包括读取文件、写入文件等涉及到 I/O 操作的任务。</li><li>页面解析、渲染：包括 DOM 解析、CSS 解析、页面布局和绘制等与页面渲染相关的任务。</li><li>动画：<code>requestAnimationFrame</code> 用于执行动画效果的任务。</li></ol><h3 id="_2、微任务" tabindex="-1"><a class="header-anchor" href="#_2、微任务"><span>2、微任务</span></a></h3><p>JavaScript 引擎自身发起的、优先级更高的异步任务，会在当前宏任务执行完毕后立即执行，且会在下一个宏任务开始前清空整个微任务队列。</p><ol><li>Promise 回调：Promise 对象的处理程序（<code>.then</code>、<code>.catch</code>、<code>.finally</code>）中的回调函数都是微任务。</li><li><code>MutationObserver</code>：用于监测 DOM 变化的任务。</li><li><code>process.nextTick</code>（在 <code>Node.js</code> 环境下）：在当前执行栈结束后立即执行的任务。</li><li><code>queueMicrotask()</code>：用于将一个微任务添加到微任务队列中。</li></ol><h3 id="_3、区别" tabindex="-1"><a class="header-anchor" href="#_3、区别"><span>3、区别</span></a></h3><p>以下是宏任务（Macrotask）与微任务（Microtask）的对比表格，清晰展示二者的核心区别：</p><hr><table><thead><tr><th>对比维度</th><th>宏任务 (Macrotask)</th><th>微任务 (Microtask)</th></tr></thead><tbody><tr><td>定义</td><td>由宿主环境（浏览器/Node.js）发起的异步任务</td><td>由 JavaScript 引擎发起的、更高优先级的异步任务</td></tr><tr><td>存储队列</td><td>任务队列（Task Queue）</td><td>微任务队列（Job Queue）</td></tr><tr><td>队列数量</td><td>可以有多个</td><td>只有一个</td></tr><tr><td>触发时机</td><td>当前调用栈清空后执行（下一次事件循环）</td><td>当前宏任务执行完毕后立即执行（同一事件循环内）</td></tr><tr><td>优先级</td><td>较低，需等待微任务队列清空后执行</td><td>较高，优先于下一个宏任务执行</td></tr><tr><td>执行顺序</td><td>每次事件循环执行一个宏任务</td><td>一次性执行全部微任务，直到队列清空</td></tr><tr><td>嵌套行为</td><td>新任务加入队列，等待下一轮事件循环</td><td>新微任务会立即执行，可能导致递归（如微任务中生成新微任务）</td></tr><tr><td>对渲染的影响</td><td>宏任务执行后可能触发 UI 渲染（浏览器）</td><td>微任务执行期间阻塞渲染，必须全部执行完毕</td></tr></tbody></table>',10)])])}const n=e(c,[["render",o]]),l=JSON.parse('{"path":"/notes/Browser/9cjtar67/","title":"宏任务和微任务 | 浏览器相关","lang":"zh-CN","frontmatter":{"title":"宏任务和微任务","createTime":"2025/06/10 19:58:55","permalink":"/notes/Browser/9cjtar67/"},"readingTime":{"minutes":2.08,"words":623},"git":{"createdTime":1749980593000,"updatedTime":1764524144000,"contributors":[{"name":"kangkang shang","username":"","email":"535634238@qq.com","commits":3,"avatar":"https://gravatar.com/avatar/899a2a8091fc73ff6879f8a45f98a5a42ca8b9665bca19ce8af3a144e416ed11?d=retro"}],"changelog":[{"hash":"37a5215b25a66c978fe447e5ce9d1d1acc9adaad","time":1764524144000,"email":"535634238@qq.com","author":"kangkang shang","message":"docs: 更新文档结构和内容"},{"hash":"22f30359934246c92af0cd047e2b1d93b354dc43","time":1758901344000,"email":"535634238@qq.com","author":"kangkang shang","message":"docs: 更新JavaScript和浏览器相关文档"},{"hash":"715e3ed1fb9d8039c875ea7244e5305946ce84cc","time":1749980593000,"email":"535634238@qq.com","author":"kangkang shang","message":"1"}]},"filePathRelative":"notes/Browser/浏览器相关/8.宏任务和微任务.md","headers":[],"bulletin":false}');export{n as comp,l as data};
