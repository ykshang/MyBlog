import{_ as a,c as i,d as e,o as n}from"./app-BN04xNHl.js";const t={};function l(h,s){return n(),i("div",null,[...s[0]||(s[0]=[e(`<p>在 Stylus 的编译过程中，<strong>解析阶段</strong>和<strong>评估阶段</strong>是两个关键步骤，具体分工如下：</p><h2 id="一、解析阶段-parsing-phase" tabindex="-1"><a class="header-anchor" href="#一、解析阶段-parsing-phase"><span>一、解析阶段（Parsing Phase）</span></a></h2><h3 id="_1、作用" tabindex="-1"><a class="header-anchor" href="#_1、作用"><span>1、作用</span></a></h3><p>将 Stylus 源代码转换为<strong>抽象语法树（AST）</strong>。</p><h3 id="_2、过程" tabindex="-1"><a class="header-anchor" href="#_2、过程"><span>2、过程</span></a></h3><ul><li><strong>词法分析</strong>：将代码拆解为标记（tokens），如变量名、选择器、运算符等。</li><li><strong>语法分析</strong>：根据 Stylus 语法规则构建 AST，检查代码结构的正确性，如括号匹配、缩进层级、展开嵌套层级等。</li></ul><h3 id="_3、示例" tabindex="-1"><a class="header-anchor" href="#_3、示例"><span>3、示例</span></a></h3><p>解析阶段会识别变量<code>$color</code>的声明、<code>body</code>选择器及其属性，形成 AST 节点，但不处理变量值或计算。</p><div class="language-styl line-numbers-mode" data-highlighter="shiki" data-ext="styl" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-styl"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$color</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> red</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">body</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  color</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $color</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、评估阶段-evaluation-phase" tabindex="-1"><a class="header-anchor" href="#二、评估阶段-evaluation-phase"><span>二、评估阶段（Evaluation Phase）</span></a></h2><h3 id="_1、作用-1" tabindex="-1"><a class="header-anchor" href="#_1、作用-1"><span>1、作用</span></a></h3><p>对 AST 进行动态处理，生成可输出的静态 CSS 结构。</p><h3 id="_2、过程-1" tabindex="-1"><a class="header-anchor" href="#_2、过程-1"><span>2、过程</span></a></h3><ul><li><strong>变量替换</strong>：将变量引用替换为定义的值。</li><li><strong>混合展开</strong>：将混合（mixins）调用替换为实际 CSS 代码。</li><li><strong>运算与函数</strong>：执行数学运算（如<code>2px + 3px</code>）和函数调用。</li><li><strong>条件与循环</strong>：处理<code>@if</code>、<code>@for</code>等逻辑，展开为具体的 CSS 规则。</li></ul><h3 id="_3、示例-1" tabindex="-1"><a class="header-anchor" href="#_3、示例-1"><span>3、示例</span></a></h3><div class="language-styl line-numbers-mode" data-highlighter="shiki" data-ext="styl" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-styl"><span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">$padding</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> =</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">px</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> +</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 3</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">px</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">box</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  padding</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> $padding</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>评估阶段会计算<code>2px + 3px</code>为<code>5px</code>，替换<code>$padding</code>，最终生成：</p><div class="language-css line-numbers-mode" data-highlighter="shiki" data-ext="css" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-css"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">box</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  padding</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">px</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="三、对比" tabindex="-1"><a class="header-anchor" href="#三、对比"><span>三、对比</span></a></h2><table><thead><tr><th><strong>阶段</strong></th><th><strong>输入</strong> <strong>输出</strong></th><th><strong>主要任务</strong></th></tr></thead><tbody><tr><td><strong>解析阶段</strong></td><td>Stylus 源代码 → 抽象语法树（AST）</td><td>语法检查、结构分析</td></tr><tr><td><strong>评估阶段</strong></td><td>AST 处理后的 → 静态 CSS 代码</td><td>变量替换、混合展开、运算、逻辑处理</td></tr></tbody></table><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h3><ul><li><strong>解析阶段</strong>是编译的起点，确保代码语法正确并构建结构化的 AST。</li><li><strong>评估阶段</strong>是动态处理的核心，将高级特性（变量、混合、循环等）转换为静态 CSS。</li><li>最终，处理后的 AST 会进入<strong>生成阶段</strong>，输出为浏览器可识别的 CSS 代码。</li></ul>`,22)])])}const r=a(t,[["render",l]]),p=JSON.parse('{"path":"/notes/Stylus/nnuzbdhx/","title":"编译过程 | Stylus","lang":"zh-CN","frontmatter":{"title":"编译过程","createTime":"2025/04/26 16:09:15","permalink":"/notes/Stylus/nnuzbdhx/"},"readingTime":{"minutes":1.55,"words":464},"git":{"createdTime":1749980593000,"updatedTime":1764524144000,"contributors":[{"name":"kangkang shang","username":"","email":"535634238@qq.com","commits":2,"avatar":"https://gravatar.com/avatar/899a2a8091fc73ff6879f8a45f98a5a42ca8b9665bca19ce8af3a144e416ed11?d=retro"}],"changelog":[{"hash":"37a5215b25a66c978fe447e5ce9d1d1acc9adaad","time":1764524144000,"email":"535634238@qq.com","author":"kangkang shang","message":"docs: 更新文档结构和内容"},{"hash":"715e3ed1fb9d8039c875ea7244e5305946ce84cc","time":1749980593000,"email":"535634238@qq.com","author":"kangkang shang","message":"1"}]},"filePathRelative":"notes/Stylus/3.高级特性/10.编译过程.md","headers":[],"bulletin":false}');export{r as comp,p as data};
