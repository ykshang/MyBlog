import{_ as i,c as a,d as e,o as n}from"./app-BN04xNHl.js";const l={};function h(t,s){return n(),a("div",null,[...s[0]||(s[0]=[e(`<p><strong>pnpm workspace</strong> æ˜¯ pnpm æä¾›çš„ <strong>Monorepoï¼ˆå•ä½“ä»“åº“ï¼‰</strong> ç®¡ç†æ–¹æ¡ˆï¼Œå…è®¸åœ¨å•ä¸ªä»£ç ä»“åº“ä¸­ç®¡ç†å¤šä¸ªé¡¹ç›®ï¼ˆåŒ…ï¼‰ï¼Œå¹¶é«˜æ•ˆå…±äº«ä¾èµ–ã€‚ç›¸æ¯” <code>npm/yarn workspace</code>ï¼Œpnpm é€šè¿‡<strong>ç¡¬é“¾æ¥</strong>èŠ‚çœç£ç›˜ç©ºé—´ï¼Œä¾èµ–ç®¡ç†æ›´é«˜æ•ˆã€‚</p><h2 id="ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ"><span>ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ</span></a></h2><ul><li><strong>Workspaceï¼ˆå·¥ä½œåŒºï¼‰</strong>ï¼šä¸€ä¸ªåŒ…å«å¤šä¸ªå­é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œé€šè¿‡ <code>pnpm-workspace.yaml</code> å®šä¹‰ã€‚</li><li><strong>å…±äº«ä¾èµ–</strong>ï¼šæ‰€æœ‰å­é¡¹ç›®å…±ç”¨ <code>node_modules</code>ï¼Œé¿å…é‡å¤å®‰è£…ã€‚</li><li><strong>ä¾èµ–æå‡</strong>ï¼šå°†å…±ç”¨çš„ä¾èµ–æå‡åˆ°æ ¹ç›®å½•çš„ <code>node_modules</code>ï¼Œå‡å°‘å†—ä½™ã€‚</li></ul><h2 id="äºŒã€åˆå§‹åŒ–-workspace" tabindex="-1"><a class="header-anchor" href="#äºŒã€åˆå§‹åŒ–-workspace"><span>äºŒã€åˆå§‹åŒ– Workspace</span></a></h2><h3 id="æ­¥éª¤-1-åˆ›å»ºé¡¹ç›®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤-1-åˆ›å»ºé¡¹ç›®ç»“æ„"><span><strong>æ­¥éª¤ 1ï¼šåˆ›å»ºé¡¹ç›®ç»“æ„</strong></span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-monorepo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;&amp;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> my-monorepo</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> init</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">              # åˆå§‹åŒ–æ ¹ç›®å½• package.json</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›®å½•ç»“æ„ç¤ºä¾‹ï¼š</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-"><span class="line"><span>my-monorepo/</span></span>
<span class="line"><span>â”œâ”€â”€ packages/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ app/           # å­é¡¹ç›®1ï¼ˆå¦‚å‰ç«¯åº”ç”¨ï¼‰</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ package.json</span></span>
<span class="line"><span>â”‚   â””â”€â”€ utils/         # å­é¡¹ç›®2ï¼ˆå¦‚å…±äº«å·¥å…·åº“ï¼‰</span></span>
<span class="line"><span>â”‚       â””â”€â”€ package.json</span></span>
<span class="line"><span>â”œâ”€â”€ pnpm-workspace.yaml</span></span>
<span class="line"><span>â””â”€â”€ package.json</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ­¥éª¤-2-é…ç½®-pnpm-workspace-yaml" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤-2-é…ç½®-pnpm-workspace-yaml"><span><strong>æ­¥éª¤ 2ï¼šé…ç½® <code>pnpm-workspace.yaml</code></strong></span></a></h3><p>åœ¨æ ¹ç›®å½•åˆ›å»º <code>pnpm-workspace.yaml</code>ï¼Œå®šä¹‰å­é¡¹ç›®è·¯å¾„ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">packages</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">packages/*</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # åŒ¹é… packages/ ä¸‹çš„æ‰€æœ‰é¡¹ç›®</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">apps/*</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # ä¹Ÿå¯ä»¥åŒ¹é…å…¶ä»–ç›®å½•</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ­¥éª¤-3-è®¾ç½®å­é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤-3-è®¾ç½®å­é¡¹ç›®"><span><strong>æ­¥éª¤ 3ï¼šè®¾ç½®å­é¡¹ç›®</strong></span></a></h3><p>åœ¨æ¯ä¸ªå­é¡¹ç›®ï¼ˆå¦‚ <code>packages/utils</code>ï¼‰ä¸­åˆå§‹åŒ– <code>package.json</code>ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packages/utils</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> init</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¡®ä¿ <code>name</code> ç¬¦åˆåŒ…å‘½åè§„èŒƒï¼ˆå¦‚ <code>@my-monorepo/utils</code>ï¼‰ã€‚</p><hr><h2 id="_3-å®‰è£…ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_3-å®‰è£…ä¾èµ–"><span><strong>3. å®‰è£…ä¾èµ–</strong></span></a></h2><h3 id="_1-å…¨å±€å®‰è£…-æ ¹ç›®å½•" tabindex="-1"><a class="header-anchor" href="#_1-å…¨å±€å®‰è£…-æ ¹ç›®å½•"><span><strong>(1) å…¨å±€å®‰è£…ï¼ˆæ ¹ç›®å½•ï¼‰</strong></span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># å®‰è£…æ‰€æœ‰å­é¡¹ç›®çš„ä¾èµ–ï¼ˆç±»ä¼¼ \`npm install\`ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># å®‰è£…å…¨å±€å·¥å…·ï¼ˆå¦‚ typescriptã€eslintï¼‰</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -Dw</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> typescript</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eslint</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>-D</code>ï¼šå¼€å‘ä¾èµ–ï¼ˆ<code>devDependencies</code>ï¼‰</li><li><code>-w</code>ï¼šå®‰è£…åœ¨<strong>æ ¹ç›®å½•</strong>ï¼ˆworkspace rootï¼‰</li></ul><h3 id="_2-ä¸ºå­é¡¹ç›®å•ç‹¬å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_2-ä¸ºå­é¡¹ç›®å•ç‹¬å®‰è£…"><span><strong>(2) ä¸ºå­é¡¹ç›®å•ç‹¬å®‰è£…</strong></span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># è¿›å…¥å­é¡¹ç›®ç›®å½•å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packages/app</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> react</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æˆ–ç›´æ¥ä»æ ¹ç›®å½•å®‰è£…ï¼ˆæŒ‡å®šå­é¡¹ç›®ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> react</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --filter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> @my-monorepo/app</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>--filter</code>ï¼šæŒ‡å®šç›®æ ‡å­é¡¹ç›®ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼Œå¦‚ <code>--filter &quot;packages/*&quot;</code>ï¼‰</li></ul><h3 id="_3-å­é¡¹ç›®ä¹‹é—´äº’ç›¸å¼•ç”¨" tabindex="-1"><a class="header-anchor" href="#_3-å­é¡¹ç›®ä¹‹é—´äº’ç›¸å¼•ç”¨"><span><strong>(3) å­é¡¹ç›®ä¹‹é—´äº’ç›¸å¼•ç”¨</strong></span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># åœ¨ packages/app ä¸­å¼•ç”¨ packages/utils</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> @my-monorepo/utils</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --filter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> @my-monorepo/app</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¼šåœ¨ <code>app/package.json</code> ä¸­æ·»åŠ ï¼š</p><div class="language-json line-numbers-mode" data-highlighter="shiki" data-ext="json" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">dependencies</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">@my-monorepo/utils</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">workspace:*</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_4-è¿è¡Œè„šæœ¬" tabindex="-1"><a class="header-anchor" href="#_4-è¿è¡Œè„šæœ¬"><span><strong>4. è¿è¡Œè„šæœ¬</strong></span></a></h2><h3 id="_1-è¿è¡Œå•ä¸ªå­é¡¹ç›®çš„è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#_1-è¿è¡Œå•ä¸ªå­é¡¹ç›®çš„è„šæœ¬"><span><strong>(1) è¿è¡Œå•ä¸ªå­é¡¹ç›®çš„è„šæœ¬</strong></span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># è¿›å…¥å­é¡¹ç›®è¿è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> packages/app</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æˆ–ä»æ ¹ç›®å½•è¿è¡Œï¼ˆæ¨èï¼‰</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --filter</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> @my-monorepo/app</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dev</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å¹¶è¡Œè¿è¡Œæ‰€æœ‰å­é¡¹ç›®çš„è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#_2-å¹¶è¡Œè¿è¡Œæ‰€æœ‰å­é¡¹ç›®çš„è„šæœ¬"><span><strong>(2) å¹¶è¡Œè¿è¡Œæ‰€æœ‰å­é¡¹ç›®çš„è„šæœ¬</strong></span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> build</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">     # åœ¨æ‰€æœ‰å­é¡¹ç›®ä¸­è¿è¡Œ build å‘½ä»¤</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><code>-r</code>ï¼šé€’å½’æ‰§è¡Œï¼ˆ<code>--recursive</code>ï¼‰</li></ul><h3 id="_3-ä»…è¿è¡Œéƒ¨åˆ†å­é¡¹ç›®çš„è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#_3-ä»…è¿è¡Œéƒ¨åˆ†å­é¡¹ç›®çš„è„šæœ¬"><span><strong>(3) ä»…è¿è¡Œéƒ¨åˆ†å­é¡¹ç›®çš„è„šæœ¬</strong></span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --filter</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">@my-monorepo/app</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dev</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --filter</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">{packages/*,apps/*}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> test</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_5-ä¾èµ–ç®¡ç†ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#_5-ä¾èµ–ç®¡ç†ä¼˜åŒ–"><span><strong>5. ä¾èµ–ç®¡ç†ä¼˜åŒ–</strong></span></a></h2><h3 id="_1-æå‡å…¬å…±ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1-æå‡å…¬å…±ä¾èµ–"><span><strong>(1) æå‡å…¬å…±ä¾èµ–</strong></span></a></h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œpnpm ä¼šè‡ªåŠ¨å°†å…¬å…±ä¾èµ–æå‡åˆ°æ ¹ç›®å½• <code>node_modules</code>ï¼Œå‡å°‘é‡å¤å®‰è£…ã€‚</p><h3 id="_2-ç¦æ­¢ä¾èµ–æå‡" tabindex="-1"><a class="header-anchor" href="#_2-ç¦æ­¢ä¾èµ–æå‡"><span><strong>(2) ç¦æ­¢ä¾èµ–æå‡</strong></span></a></h3><p>åœ¨ <code>pnpm-workspace.yaml</code> ä¸­è®¾ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">shared-workspace-lockfile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-æŸ¥çœ‹ä¾èµ–æ ‘" tabindex="-1"><a class="header-anchor" href="#_3-æŸ¥çœ‹ä¾èµ–æ ‘"><span><strong>(3) æŸ¥çœ‹ä¾èµ–æ ‘</strong></span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> why</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lodash</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">       # æŸ¥çœ‹ lodash è¢«å“ªäº›åŒ…ä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> list</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">          # é€’å½’åˆ—å‡ºæ‰€æœ‰å­é¡¹ç›®çš„ä¾èµ–</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="_6-å‘å¸ƒ-workspace-åŒ…" tabindex="-1"><a class="header-anchor" href="#_6-å‘å¸ƒ-workspace-åŒ…"><span><strong>6. å‘å¸ƒ Workspace åŒ…</strong></span></a></h2><h3 id="_1-ç‰ˆæœ¬ç®¡ç†" tabindex="-1"><a class="header-anchor" href="#_1-ç‰ˆæœ¬ç®¡ç†"><span><strong>(1) ç‰ˆæœ¬ç®¡ç†</strong></span></a></h3><p>ä½¿ç”¨ <code>changesets</code> æˆ– <code>pnpm version</code> ç®¡ç†ç‰ˆæœ¬å·ï¼š</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># æ›´æ–°æ‰€æœ‰å­é¡¹ç›®ç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> version</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> patch</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å‘å¸ƒåˆ°-npm" tabindex="-1"><a class="header-anchor" href="#_2-å‘å¸ƒåˆ°-npm"><span><strong>(2) å‘å¸ƒåˆ° npm</strong></span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">pnpm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> publish</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">       # é€’å½’å‘å¸ƒæ‰€æœ‰åŒ…ï¼ˆéœ€æå‰ç™»å½• npmï¼‰</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><hr><h2 id="_7-å¸¸è§é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_7-å¸¸è§é—®é¢˜"><span><strong>7. å¸¸è§é—®é¢˜</strong></span></a></h2><h3 id="q1-å¦‚ä½•è§£å†³å­é¡¹ç›®ä¹‹é—´çš„å¾ªç¯ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#q1-å¦‚ä½•è§£å†³å­é¡¹ç›®ä¹‹é—´çš„å¾ªç¯ä¾èµ–"><span><strong>Q1: å¦‚ä½•è§£å†³å­é¡¹ç›®ä¹‹é—´çš„å¾ªç¯ä¾èµ–ï¼Ÿ</strong></span></a></h3><ul><li>ä½¿ç”¨ <code>&quot;peerDependencies&quot;</code> æ›¿ä»£ç›´æ¥ä¾èµ–ã€‚</li><li>é‡æ„ä»£ç ï¼Œæå–å…¬å…±é€»è¾‘åˆ°ç‹¬ç«‹åŒ…ã€‚</li></ul><h3 id="q2-å¦‚ä½•é™åˆ¶æŸäº›ä¾èµ–åªèƒ½åœ¨æ ¹ç›®å½•å®‰è£…" tabindex="-1"><a class="header-anchor" href="#q2-å¦‚ä½•é™åˆ¶æŸäº›ä¾èµ–åªèƒ½åœ¨æ ¹ç›®å½•å®‰è£…"><span><strong>Q2: å¦‚ä½•é™åˆ¶æŸäº›ä¾èµ–åªèƒ½åœ¨æ ¹ç›®å½•å®‰è£…ï¼Ÿ</strong></span></a></h3><p>åœ¨ <code>pnpm-workspace.yaml</code> ä¸­è®¾ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">neverBuiltDependencies</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fsevents</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # ç¦æ­¢æŸäº›ä¾èµ–å®‰è£…</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="q3-å¦‚ä½•å…¼å®¹-npm-yarn-workspace-é¡¹ç›®è¿ç§»" tabindex="-1"><a class="header-anchor" href="#q3-å¦‚ä½•å…¼å®¹-npm-yarn-workspace-é¡¹ç›®è¿ç§»"><span><strong>Q3: å¦‚ä½•å…¼å®¹ <code>npm/yarn workspace</code> é¡¹ç›®è¿ç§»ï¼Ÿ</strong></span></a></h3><ul><li>æ›¿æ¢ <code>workspace:</code> åè®®ä¸ºå…·ä½“ç‰ˆæœ¬å·ï¼ˆå¦‚ <code>&quot;^1.0.0&quot;</code>ï¼‰ã€‚</li><li>ä½¿ç”¨ <code>pnpm import</code> ä» <code>yarn.lock</code> æˆ– <code>package-lock.json</code> ç”Ÿæˆ <code>pnpm-lock.yaml</code>ã€‚</li></ul><hr><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span><strong>æ€»ç»“</strong></span></a></h2><table><thead><tr><th>åŠŸèƒ½</th><th>å‘½ä»¤ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>åˆå§‹åŒ– workspace</strong></td><td><code>pnpm init</code> + <code>pnpm-workspace.yaml</code></td></tr><tr><td><strong>å®‰è£…ä¾èµ–</strong></td><td><code>pnpm add react --filter @my-monorepo/app</code></td></tr><tr><td><strong>è¿è¡Œè„šæœ¬</strong></td><td><code>pnpm --filter @my-monorepo/app dev</code></td></tr><tr><td><strong>æ‰¹é‡æ“ä½œ</strong></td><td><code>pnpm -r run build</code></td></tr><tr><td><strong>å‘å¸ƒåŒ…</strong></td><td><code>pnpm -r publish</code></td></tr></tbody></table><p>pnpm workspace æ˜¯ <strong>Monorepo çš„æœ€ä½³å®è·µ</strong>ï¼Œé€‚åˆç®¡ç†å¤æ‚çš„å‰ç«¯/å…¨æ ˆé¡¹ç›®ï¼ˆå¦‚ Next.js + NestJS + å…±äº«åº“ï¼‰ã€‚ğŸš€</p>`,65)])])}const p=i(l,[["render",h]]),r=JSON.parse('{"path":"/notes/Pnpm/fjvdfhim/","title":"2. workspace ä½¿ç”¨è¯¦è§£ | Pnpm","lang":"zh-CN","frontmatter":{"title":"2. workspace ä½¿ç”¨è¯¦è§£","createTime":"2025/06/14 10:58:49","permalink":"/notes/Pnpm/fjvdfhim/"},"readingTime":{"minutes":2.98,"words":893},"git":{"createdTime":1749980593000,"updatedTime":1764524144000,"contributors":[{"name":"kangkang shang","username":"","email":"535634238@qq.com","commits":2,"avatar":"https://gravatar.com/avatar/899a2a8091fc73ff6879f8a45f98a5a42ca8b9665bca19ce8af3a144e416ed11?d=retro"}],"changelog":[{"hash":"37a5215b25a66c978fe447e5ce9d1d1acc9adaad","time":1764524144000,"email":"535634238@qq.com","author":"kangkang shang","message":"docs: æ›´æ–°æ–‡æ¡£ç»“æ„å’Œå†…å®¹"},{"hash":"715e3ed1fb9d8039c875ea7244e5305946ce84cc","time":1749980593000,"email":"535634238@qq.com","author":"kangkang shang","message":"1"}]},"filePathRelative":"notes/Pnpm/2.workspace ä½¿ç”¨è¯¦è§£.md","headers":[],"bulletin":false}');export{p as comp,r as data};
