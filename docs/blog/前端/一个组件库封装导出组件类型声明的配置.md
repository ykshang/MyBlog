---
title: 使用 unplugin-vue-components 导出组件类型声明时过滤掉 element-plus 的配置
createTime: 2025/12/15 00:15:46
permalink: /blog/of5idlpu/
---

最近在封装一个组件库时，需要导出组件的类型声明，以便在使用组件库的项目中能够获得类型检查和智能提示。

由于我使用的是 `unplugin-vue-components` 插件来自动导入组件，所以需要配置插件来导出组件的类型声明。

同时，我使用了 `element-plus` 组件库，我希望导出的组件类型声明中不要包含 `element-plus` 组件库的类型声明。

查了一下官网的 API，发现并没有配置数量上的限制。因此我们可以使用两份配置来实现组件的全局声明和自定义组件的过滤导出。

```ts title='vite.config.ts'
import Components from 'unplugin-vue-components/vite'

export default defineConfig({

  plugins: [
    // 必须先定义 element-plus，后定义自定义组件的类型导出 // [!code warning]
    // element-plus 组件库的类型声明
    Components({
      resolvers: [
        ElementPlusResolver({
          importStyle: 'sass',
        }),
        IconsResolver({
          prefix: 'Iconify', // 图标组件前缀
          enabledCollections: ['ep', 'ri'], // 启用ep、ri图标集
        }),
      ],
      dts: './src/types/components.d.ts',
    }),
    // 自定义组件的类型声明
    Components({
      // allow auto load markdown components under `./src/components/`
      extensions: ['vue', 'md'],
      dirs: ['src/components'],
      // allow auto import and register components used in markdown
      include: [/\.vue$/, /\.vue\?vue/, /\.md$/],
      dts: './src/types/index.d.ts',
    }),
  ]
}
```

这样我们只需要在 `package.json` 中添加 `types` 字段，指向 `src/types/index.d.ts` 即可。

```json title='package.json'
{
  "exports": {
    "./types": "./src/types/index.d.ts"
  },
  "types": "./src/types/index.d.ts"
}
```

::: warning 注意
由于 `unplugin-vue-components` 插件的工作原理，我们需要确保 `element-plus` 组件库的类型声明在 `自定义组件的类型声明` 之前。
:::
