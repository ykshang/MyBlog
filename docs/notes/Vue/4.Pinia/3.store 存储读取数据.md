---
title: store 存储、读取数据
createTime: 2025/08/09 22:56:26
permalink: /Vue/372nekls/
---

`Store`是一个保存：**状态**、**业务逻辑** 的实体，每个组件都可以**读取**、**写入**它。

它有三个概念：`state`、`getter`、`action`，相当于组件中的： `data`、 `computed` 和 `methods`。

::: code-tabs

@tab src/store/count.ts

```ts
// 引入defineStore用于创建store
import { defineStore } from "pinia";

// 定义并暴露一个store
export const useCountStore = defineStore("count", {
  // 动作
  actions: {},
  // 状态
  state() {
    return {
      sum: 6,
    };
  },
  // 计算
  getters: {},
});
```

@tab src/store/talk.ts

```js
// 引入defineStore用于创建store
import { defineStore } from "pinia";

// 定义并暴露一个store
export const useTalkStore = defineStore("talk", {
  // 动作
  actions: {},
  // 状态
  state() {
    return {
      talkList: [
        { id: "yuysada01", content: "你今天有点怪，哪里怪？怪好看的！" },
        { id: "yuysada02", content: "草莓、蓝莓、蔓越莓，你想我了没？" },
        { id: "yuysada03", content: "心里给你留了一块地，我的死心塌地" },
      ],
    };
  },
  // 计算
  getters: {},
});
```

@tab HomeView.vue

```vue
<template>
  <h2>当前求和为：{{ sumStore.sum }}</h2>
</template>

<script setup lang="ts" name="Count">
// 引入对应的useXxxxxStore
import { useSumStore } from "@/store/sum";

// 调用useXxxxxStore得到对应的store
const sumStore = useSumStore();
</script>
```

@tab TalkView.vue

```vue
<template>
  <ul>
    <li v-for="talk in talkStore.talkList" :key="talk.id">
      {{ talk.content }}
    </li>
  </ul>
</template>

<script setup lang="ts" name="Count">
import axios from "axios";
import { useTalkStore } from "@/store/talk";

const talkStore = useTalkStore();
</script>
```

:::

## 修改数据(三种方式)

### 方式 1、直接修改

```ts
countStore.sum = 666;
```

### 方式 2、批量修改

```ts
countStore.$patch({
  sum: 999,
  school: "atguigu",
});
```

###　方式３、借用 action
借助`action`修改（`action`中可以编写一些业务逻辑）

```js
import { defineStore } from "pinia";

export const useCountStore = defineStore("count", {
  /*************/
  actions: {
    //加
    increment(value: number) {
      if (this.sum < 10) {
        //操作countStore中的sum
        this.sum += value;
      }
    },
    //减
    decrement(value: number) {
      if (this.sum > 1) {
        this.sum -= value;
      }
    },
  },
  /*************/
});
```

1. 组件中调用`action`即可

   ```js
   // 使用countStore
   const countStore = useCountStore();

   // 调用对应action
   countStore.incrementOdd(n.value);
   ```
