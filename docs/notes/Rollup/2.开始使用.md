---
title: 开始使用
createTime: 2025/12/07 23:17:34
permalink: /notes/Rollup/fts7pj7i/
---

## 初始化一个库项目

使用 `npm init` 初始化一个新的项目：

```bash
npm init -y
```

大概内容如下：

```json title="package.json"
{
  "name": "demo-for-learn-rollup",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "keywords": [],
  "author": "",
  "license": "ISC"
}
```

## 安装 Rollup

首先，我们需要安装 Rollup，一般推荐安装在项目下，避免全局版本变化带来的潜在问题。
::: code-tabs

@tab npm

```bash
npm install -D rollup
```

@tab pnpm

```bash
pnpm add -D rollup
```

:::

## 添加测试文件

我们在 `src` 目录下创建 `main.js` 文件，在 `src/util` 目录下创建 `calculator.js` 文件，用于测试 Rollup 打包。

内容如下：

::: code-tree title="demo-for-learn-rollup" height="400px" entry="src/index.js"

```js title="src/main.js" :active
import { add, multiply } from "./util/calculator.js";
console.log(add(1, 2)); // 输出: 3
console.log(multiply(3, 4)); // 输出: 12
export default function calculator() {
  return {
    add,
    multiply,
  };
}
```

```js title="src/util/calculator.js"
export function add(a, b) {
  return a + b;
}
export function subtract(a, b) {
  return a - b;
}
export function multiply(a, b) {
  return a * b;
}
export function divide(a, b) {
  if (b === 0) {
    throw new Error("除数不能为零！");
  }
  return a / b;
}
```

:::

## 创建 Rollup 配置文件

在项目根目录下创建 `rollup.config.js` 文件，用于配置 Rollup。

内容如下：

```js title="rollup.config.js"
export default {
  input: "src/main.js",
  output: {
    file: "dist/bundle.js",
    format: "es",
  },
};
```

## 添加构建脚本

在 `package.json` 中添加一个 `build` 脚本，用于执行 Rollup 打包：

::: note 默认配置文件

和大多数工具链一样，rollup 支持指定配置文件的位置，同时也支持默认读取项目根目录下的 `rollup.config.js` 文件。

:::

```json title="package.json"
{
  "scripts": {
    "build": "rollup -c rollup.config.js"
  }
}
```

::: note
执行 `npm run build` 命令，Rollup 就会根据配置文件打包 `src/main.js` 并输出到 `dist/bundle.js`。
:::
