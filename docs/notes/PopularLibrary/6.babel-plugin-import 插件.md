---
title: "babel-plugin-import æ’ä»¶"
createTime: 2025/07/17 23:11:51
permalink: /notes/PopularLibrary/ar4au96n/
tags:
  - babel
  - webpack
---

## ç®€ä»‹

`babel-plugin-import` çš„æ ¸å¿ƒç”¨é€”æ˜¯ **å®ç°ç»„ä»¶å’Œæ ·å¼çš„æŒ‰éœ€åŠ è½½**ï¼Œä»è€Œæ˜¾è‘—å‡å°‘æ‰“åŒ…ä½“ç§¯ã€‚

## ä¸»è¦ä½œç”¨

ä¸‹é¢é€šè¿‡ Element UI çš„å…·ä½“ç¤ºä¾‹è¯´æ˜å…¶ä½œç”¨ï¼š

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç”¨åˆ°å¾ˆå¤šçš„ Element UI ç»„ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·å¼•å…¥ Element UI å…¨é‡çš„ç»„ä»¶å’Œ css æ–‡ä»¶

```javascript
import Vue from "vue";
import ElementUI from "element-ui"; // å¼•å…¥æ•´ä¸ªElementUI
import "element-ui/lib/theme-chalk/index.css"; // å…¨é‡æ ·å¼

Vue.use(ElementUI); // å…¨å±€æ³¨å†Œæ‰€æœ‰ç»„ä»¶
```

è¿™æ ·å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå³ä½¿åªç”¨äº†å‡ ä¸ªç»„ä»¶ï¼Œä¹Ÿä¼šæ‰“åŒ…æ•´ä¸ª Element UI çš„ä»£ç å’Œæ ·å¼ï¼ˆçº¦ 200KB+ï¼‰ã€‚

ç„¶åæˆ‘ä»¬å¯èƒ½è€ƒè™‘ä½¿ç”¨ **æŒ‰éœ€å¼•å…¥** çš„æ–¹å¼ï¼Œåªå¼•å…¥æˆ‘ä»¬éœ€è¦çš„ç»„ä»¶ï¼Œè¿™æ ·å¯ä»¥æ˜¾è‘—å‡å°‘æ‰“åŒ…ä½“ç§¯ã€‚

```javascript
// é…ç½®ååªéœ€è¿™æ ·å†™ï¼ˆåŸå§‹ä»£ç ï¼‰
import { Button, Select } from "element-ui";

Vue.use(Button);
Vue.use(Select);
```

ä½†æ˜¯å®é™…ä¸Šå‘¢ï¼Œè¿™ä¸ªæŒ‰éœ€å¼•å…¥å¯èƒ½å¹¶ä¸å½»åº•ï¼Œç”šè‡³å¯èƒ½åªæ˜¯çœ‹èµ·æ¥æ˜¯æŒ‰éœ€å¼•å…¥ã€‚è¯´ç™½äº†ï¼Œèƒ½å¦çœŸæ­£çš„åšåˆ°æŒ‰éœ€å¼•å…¥ï¼Œå…¶å®å’Œ Tree Shaking ç›´æ¥ç›¸å…³ã€‚ç»„ä»¶åº“å†…éƒ¨çš„ JSã€CSS æ–‡ä»¶å¯èƒ½ä¾æ—§æ˜¯å…¨é‡å¼•å…¥çš„ï¼Œå¯èƒ½å¯¹ Tree Shaking æŠ€æœ¯çš„æ”¯æŒä¸å½»åº•ã€‚

è½¬æ¢å‰ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹ä»£ç ï¼š

```javascript
// é…ç½®ååªéœ€è¿™æ ·å†™ï¼ˆåŸå§‹ä»£ç ï¼‰
import { Button, Select } from "element-ui";
```

æˆ‘ä»¬ä½¿ç”¨ `babel-plugin-import` æ’ä»¶åï¼ŒBabel ä¼šå°†å‰è¾¹çš„ä»£ç è½¬æ¢ä¸ºç±»ä¼¼ä¸‹é¢çš„å½¢å¼ï¼š

```javascript
import Button from "element-ui/lib/button"; // ä»…åŠ è½½Buttonç»„ä»¶
import "element-ui/lib/button/style.css"; // è‡ªåŠ¨å¼•å…¥Buttonæ ·å¼

import Select from "element-ui/lib/select"; // ä»…åŠ è½½Selectç»„ä»¶
import "element-ui/lib/select/style.css"; // è‡ªåŠ¨å¼•å…¥Selectæ ·å¼
```

**æ•ˆæœ**ï¼šæ‰“åŒ…æ—¶åªåŒ…å« `Button` å’Œ `Select` çš„ä»£ç å’Œæ ·å¼ï¼Œä½“ç§¯å‡å°‘ 80% ä»¥ä¸Šã€‚

## å…·ä½“é…ç½®æ­¥éª¤

### 1ã€å®‰è£…æ’ä»¶

```bash
npm install babel-plugin-import --save-dev
```

### 2ã€Babel é…ç½®ï¼ˆ.babelrc æˆ– babel.config.jsï¼‰

```javascript
{
  "plugins": [
    [
      "import",
      {
        "libraryName": "element-ui",
        "style": true // true è¡¨ç¤ºå¼•å…¥CSSï¼Œä¹Ÿå¯è®¾ä¸º "css" æˆ–è‡ªå®šä¹‰è·¯å¾„
      }
    ]
  ]
}
```

### 3ã€Webpack éœ€é…åˆå¤„ç† CSS

ç¡®ä¿å·²å®‰è£… `style-loader` å’Œ `css-loader`ï¼š

```javascript
// webpack.config.js
module: {
  rules: [
    {
      test: /\.css$/,
      use: ["style-loader", "css-loader"],
    },
  ];
}
```

## å…³é”®é…ç½®é€‰é¡¹

ä»¥ä¸‹æ˜¯é’ˆå¯¹ Element UI æ¡†æ¶çš„ä¸€äº›é…ç½®è¯´æ˜ï¼š

| **å‚æ•°**          | **ä½œç”¨**                          | **æ¨èå€¼**                           |
| ----------------- | --------------------------------- | ------------------------------------ |
| `libraryName`     | æŒ‡å®šåº“åç§°ï¼ˆå›ºå®šä¸º `element-ui`ï¼‰ | `"element-ui"`                       |
| `style`           | æ˜¯å¦è‡ªåŠ¨å¼•å…¥æ ·å¼                  | `true`ï¼ˆæˆ– `"css"`ï¼‰                 |
| `customStyleName` | è‡ªå®šä¹‰æ ·å¼æ–‡ä»¶è·¯å¾„                | `(name) => `custom/path/${name}.css` |

## æ³¨æ„äº‹é¡¹

1. **æ ·å¼æ–‡ä»¶æ ¼å¼**ï¼š
   - Element UI ä½¿ç”¨é¢„ç¼–è¯‘çš„ CSSï¼Œé…ç½® `style: "css"` æˆ– `style: true` å‡å¯ã€‚
2. **ç»„ä»¶æ³¨å†Œæ–¹å¼**ï¼š
   - æŒ‰éœ€å¼•å…¥æ—¶éœ€æ‰‹åŠ¨æ³¨å†Œç»„ä»¶ï¼ˆ`Vue.use(Button)`ï¼‰ï¼Œä¸èƒ½å…¨å±€æ³¨å†Œã€‚
3. **ä¸»é¢˜å®šåˆ¶**ï¼š
   - å¦‚éœ€å®šåˆ¶ä¸»é¢˜ï¼Œä»éœ€å•ç‹¬å¼•å…¥ä¸»é¢˜æ–‡ä»¶ï¼Œä½†å¯é€šè¿‡ `customStyleName` æŒ‡å‘è‡ªå®šä¹‰è·¯å¾„ã€‚

## å®Œæ•´ç¤ºä¾‹ä»£ç 

#### 1. **ç»„ä»¶æŒ‰éœ€å¼•å…¥**

```javascript
import Vue from "vue";
import { Button, Select } from "element-ui";

Vue.use(Button);
Vue.use(Select);
```

#### 2. **Babel é…ç½®**

```javascript
// babel.config.js
module.exports = {
  plugins: [
    [
      "import",
      {
        libraryName: "element-ui",
        style: true, // è‡ªåŠ¨å¼•å…¥CSS
      },
    ],
  ],
};
```

#### 3. **Webpack é…ç½®**

```javascript
// webpack.config.js
module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ["style-loader", "css-loader"],
      },
    ],
  },
};
```

---

é€šè¿‡ `babel-plugin-import`ï¼ŒElement UI é¡¹ç›®çš„æ‰“åŒ…ä½“ç§¯å¯ä¼˜åŒ–è‡³ **ä»…åŒ…å«å®é™…ä½¿ç”¨çš„ç»„ä»¶**ï¼Œéå¸¸é€‚åˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼ ğŸš€
