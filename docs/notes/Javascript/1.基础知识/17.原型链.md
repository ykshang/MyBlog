---
title: 原型链
createTime: 2025/03/12 15:32:18
permalink: /Javascript/x15l71wf/
---

原型链（prototype chain）是 JavaScript 中实现对象属性继承的一种机制。

每个对象（除 null 外）都有一个内部属性 `[[Prototype]]`（可通过 `__proto__` 访问），指向其原型对象。原型对象自身也可能有原型，形成链式结构，最终指向 `Object.prototype`（其原型为 `null`）。

当我们访问一个对象的属性时，如果该对象本身没有这个属性，JavaScript 引擎会沿着原型链向上查找，直到找到属性或者到达原型链的顶端。这样就实现了属性的继承。

通过原型链，我们可以重复使用已有的对象的属性和方法，而不需要每个对象都复制一份。这样可以节省内存，也方便了对象的属性和方法的更新和维护。

例子：

```js
// 创建一个原型对象
const myPrototype = {
  greet: function () {
    console.log("Hello!");
  },
};
// 创建一个对象，其原型为 myPrototype
const myObject = Object.create(myPrototype);
// 调用 myObject 的 greet 方法
myObject.greet(); // 输出 "Hello!"
```

## 二、修改原型链指向

我们可以使用 ==Object.create()== 方法来显式地指定一个对象的原型，或者使用 ==\_\_proto\_\_== 属性动态改变一个对象的原型链。

```js
Person.prototype = {
  constructor: Person, // 修正 constructor 指向
  gender: "unknown",
  getInfo() {
    return `${this.name}, ${this.gender}`;
  },
};

const eve = new Person("Eve");
console.log(eve.getInfo()); // Eve, unknown
```

或者：

```js
const animal = { type: "unknown" };
const dog = Object.create(animal);
dog.name = "Buddy";

console.log(dog.type); // unknown（来自原型）
```

## 三、往原型链中添加属性和方法

我们可以通过修改原型对象的属性和方法来实现对原型链的扩展。

```js
Person.prototype.sayHello = function () {
  console.log(`Hello, I'm ${this.name}`);
};

alice.sayHello(); // Hello, I'm Alice
bob.sayHello(); // Hello, I'm Bob
```
